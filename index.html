<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Resource Bin Capacity Calculator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <h1>Resource Bin Capacity Calculator</h1>

    <section class="controls">
      <div class="row">
        <label for="tierSelect">Tier</label>
        <select id="tierSelect">
          <option value="T1">T1 — iron / wood / leather / herb</option>
          <option value="T2">T2 — steel / ironwood / fabric / oil</option>
          <option value="T3">T3 — jewels / ether</option>
          <option value="T4">T4 — essence</option>
        </select>
      </div>

      <div class="row">
        <label for="cardLevel">TCG Card level</label>
        <select id="cardLevel">
          <option value="0">0 — none</option>
          <option value="1">1 — +5%</option>
          <option value="2">2 — +10%</option>
          <option value="3">3 — +20%</option>
        </select>
      </div>

      <div class="row">
        <label for="guildLevel">Guild perk level</label>
        <input id="guildLevel" type="range" min="0" max="8" value="0" />
        <output id="guildLevelOut">0</output>
      </div>

      <div class="row">
        <label for="talentLevel">Crafting talent level</label>
        <select id="talentLevel">
          <!-- options will be set dynamically to respect caps -->
        </select>
      </div>

      <div class="row">
        <label for="roundMode">Rounding mode</label>
        <select id="roundMode">
          <option value="floor">Floor (truncate)</option>
          <option value="round">Round nearest</option>
          <option value="ceil">Ceil</option>
        </select>
      </div>

      <div class="row checkbox">
        <input id="guildApplyDH" type="checkbox" checked />
        <label for="guildApplyDH">Apply guild flat per bin to Dragon Hoard</label>
      </div>
    </section>

    <section class="bins-panel">
      <h2>Bins</h2>
      <div id="binsList"></div>
      <div class="bin-actions">
        <button id="addBinBtn">+ Add bin</button>
        <button id="clearBinsBtn">Clear bins</button>
      </div>

      <p class="hint">Each bin has a level slider (1–25) and a count (number of identical bins).</p>
    </section>

    <section class="dh-panel">
      <div class="row checkbox">
        <input id="includeDH" type="checkbox" />
        <label for="includeDH">Include Dragon Hoard (DH)</label>
      </div>

      <div id="dhOptions" class="dh-options hidden">
        <label for="dhLevel">Dragon Hoard level</label>
        <input id="dhLevel" type="range" min="0" max="25" value="0" />
        <output id="dhLevelOut">0</output>
      </div>
    </section>

    <section class="results">
      <div class="results-top">
        <div>
          <h3>Total expected resource</h3>
          <div id="totalValue" class="big-number">0</div>
        </div>
        <div>
          <button id="toggleBreakdown">Show breakdown</button>
        </div>
      </div>

      <div id="breakdown" class="breakdown hidden">
        <!-- breakdown rows inserted here -->
      </div>
    </section>

    <footer>
      <small>Formula per bin: <code>(base + guild_flat_per_bin) × (1 + card%) × (1 + talent%)</code>. Talent and guild can be 0. DH optional.</small>
    </footer>
  </main>

  <script src="calculator.js"></script>
  <script src="main.js"></script>
</body>
</html>
